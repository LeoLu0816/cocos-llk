System.register("chunks:///main.js",["cc"],(function(){"use strict";var t,e,n,i,r,o,a,s,h,l,c,p;return{setters:[function(u){t=u.cclegacy,e=u._decorator,n=u.Sprite,i=u.Button,r=u.Node,o=u.Color,a=u.Component,s=u.Prefab,h=u.instantiate,l=u.Graphics,c=u.director,p=u.Label}],execute:function(){function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(){return(_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function v(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,b(t,e)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function k(t,e,n,i,r){var o={};return Object.keys(i).forEach((function(t){o[t]=i[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(t,e,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var d;t._RF.push({},"acfe8/BNzBGLrHvdnza0oWj","btnControl",void 0);var M=e.ccclass,T=(e.property,M("btnControl")(d=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return y(x(e=t.call.apply(t,[this].concat(i))||this),"_sprite",void 0),y(x(e),"_btn",void 0),y(x(e),"_isTips",!1),y(x(e),"_isSelect",void 0),y(x(e),"_tipsTimer",0),y(x(e),"x",0),y(x(e),"y",0),y(x(e),"type",0),y(x(e),"onClick",(function(){})),e}v(e,t);var a=e.prototype;return a.start=function(){var t=this;this._sprite=this.node.getComponent(n),this._btn=this.node.getComponent(i),this.node.on(r.EventType.TOUCH_END,(function(e){clearTimeout(t._tipsTimer),t.changeColor(o.GREEN),t.onClick()}))},a.changeColor=function(t){this._sprite.color=t},a.resetColor=function(){this.changeColor(this._isSelect?o.GREEN:o.WHITE)},f(e,[{key:"isTips",get:function(){return this._isTips},set:function(t){var e=this;this._isTips=t,t?(clearTimeout(this._tipsTimer),this.changeColor(o.CYAN),this._tipsTimer=setTimeout((function(){e.resetColor(),e._isTips=!1}),500)):this.resetColor()}},{key:"isSelect",get:function(){return this._isSelect},set:function(t){this._isSelect=t}}]),e}(a))||d);t._RF.pop(),t._RF.push({},"2ee19UNEl1LjbYncKlvzkPV","llk-path-check",void 0);var g=function(){function t(t,e){y(this,"MAX_X",10),y(this,"MAX_Y",10),y(this,"map",[]),y(this,"path_check_X",[]),y(this,"path_check_Y",[]),y(this,"path_turn_once",[]),y(this,"path_turn_twice",[]),this.MAX_X=t,this.MAX_Y=e,this.createMap()}var e=t.prototype;return e.getMap=function(){return[].concat(this.map)},e.createMap=function(){for(var t=new Array(this.MAX_Y).fill(null),e=0;e<t.length;e++)t[e]=new Array(this.MAX_X).fill(0);return this.map=t,this},e.resetMap=function(){for(var t=0;t<this.MAX_Y;t++)for(var e=0;e<this.MAX_X;e++)this.setPoint({x:e,y:t},X.EMPTY);return this},e.hasBlock=function(t){return this.map[t.x][t.y]===X.BLOCK},e.checkX=function(t,e){if(t.y!==e.y)return!1;var n=t.y,i=[];if(this.path_check_X=[],t.x>e.x)for(var r=t.x;r>=e.x;r--){if(this.hasBlock({x:r,y:n}))return!1;i.push({x:r,y:n})}else for(var o=t.x;o<=e.x;o++){if(this.hasBlock({x:o,y:n}))return!1;i.push({x:o,y:n})}return this.path_check_X=i,!0},e.checkY=function(t,e){if(t.x!==e.x)return!1;var n=t.x,i=[];if(this.path_check_Y=[],t.y>e.y)for(var r=t.y;r>=e.y;r--){if(this.hasBlock({x:n,y:r}))return!1;i.push({x:n,y:r})}else for(var o=t.y;o<=e.y;o++){if(this.hasBlock({x:n,y:o}))return!1;i.push({x:n,y:o})}return this.path_check_Y=i,!0},e.turn_once=function(t,e){this.path_turn_once=[];var n,i,r={x:t.x,y:e.y},o={x:e.x,y:t.y},a=!this.hasBlock(r),s=!this.hasBlock(o),h=!1;if(a){var l=this.checkX(r,e),c=this.checkY(r,t);h=l&&c}if(h)return(n=this.path_turn_once).push.apply(n,this.path_check_X.concat(this.path_check_Y)),!0;if(s){var p=this.checkX(o,t),u=this.checkY(o,e);h=p&&u}return!!h&&((i=this.path_turn_once).push.apply(i,this.path_check_X.concat(this.path_check_Y)),!0)},e.turn_twice=function(t,e){this.path_turn_twice=[];for(var n=[],i=t.x-1;i>=0;i--){var r={x:i,y:t.y};if(this.hasBlock(r))break;n.push(r)}for(var o=t.x+1;o<this.MAX_X;o++){var a={x:o,y:t.y};if(this.hasBlock(a))break;n.push(a)}for(var s=t.y-1;s>=0;s--){var h={x:t.x,y:s};if(this.hasBlock(h))break;n.push(h)}for(var l=t.y+1;l<this.MAX_Y;l++){var c={x:t.x,y:l};if(this.hasBlock(c))break;n.push(c)}for(var p=0;p<n.length;p++)if(this.turn_once(n[p],e)){var u,f;if(this.checkX(t,n[p]))(f=this.path_turn_twice).push.apply(f,this.path_check_X);else if(this.checkY(t,n[p])){var y;(y=this.path_turn_twice).push.apply(y,this.path_check_Y)}return(u=this.path_turn_twice).push.apply(u,this.path_turn_once),!0}return!1},e.setPoint=function(t,e){var n=this;return Array.isArray(t)||(t=[t]),t.forEach((function(t){var i=t.x,r=t.y;return n.map[i][r]=e})),this},e.getPoints=function(t){for(var e=[],n=0;n<this.MAX_X;n++)for(var i=0;i<this.MAX_Y;i++)this.map[n][i]===t&&e.push({x:n,y:i});return e},e.calcLinePoint=function(t,e){var n,i,r=[],o=[],a=function(t,e){var n=e.x,i=e.y,r=t.filter((function(t){return t.x===n&&(t.y===i+1||t.y===i-1)}));if(r.length)return r[0];var o=t.filter((function(t){return t.y===i&&(t.x===n+1||t.x===n-1)}));return o.length?o[0]:null},s=function(t,e){return t.filter((function(t){return!(t.x===e.x&&t.y===e.y)}))},h=null,l=e;r.push(e),o.push(e),t=s(t,e);do{var c=r[r.length-1];if(null!==(l=a(t,c))){if(t=s(t,l),null!==h)(i=h,(n=l).x!==i.x&&n.y!==i.y)&&o.push(c);h=c,r.push(_({},l))}else o.push(c)}while(null!==l);return{points:r,turnPoints:o}},e.check=function(){var t={p1:null,p2:null,isOK:!1,points:[],turnPoints:[]},e=this.getPoints(X.POINT);if(e.length<2)return t;var n=e[0],i=e[1],r=[];if(this.checkX(n,i)?r.push.apply(r,this.path_check_X):this.checkY(n,i)?r.push.apply(r,this.path_check_Y):this.turn_once(n,i)?r.push.apply(r,this.path_turn_once):this.turn_twice(n,i)&&r.push.apply(r,this.path_turn_twice),r.length){t.isOK=!0;var o=this.calcLinePoint(r,n);t.p1=n,t.p2=i,t.points=o.points,t.turnPoints=o.turnPoints}return t},t}(),X={BLOCK:1,EMPTY:0,POINT:9,PATH:5};t._RF.pop(),t._RF.push({},"bd2b4SQ719P3qCLaNuDDp50","store",void 0);var P,C,A,w,E,Y,O,L,N,B,S,z,G,K=new(function(){function t(){y(this,"MAX_TYPE",10)}return t.prototype.setMaxType=function(t){this.MAX_TYPE=t},f(t,[{key:"MaxType",get:function(){return this.MAX_TYPE}}]),t}());t._RF.pop(),t._RF.push({},"1d510j5SM5GyKWOVKkFIxnl","btnManager",void 0);var R,j,F,H,D,U,I,W,V,q=e.ccclass,Q=e.property;P=q("btnManager"),C=Q(s),A=Q(s),w=Q(i),E=Q(i),Y=Q(i),P((N=k((L=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return m(x(e=t.call.apply(t,[this].concat(i))||this),"btnTmpl",N,x(e)),m(x(e),"linePre",B,x(e)),y(x(e),"line",void 0),m(x(e),"btnTips",S,x(e)),m(x(e),"btnNewGame",z,x(e)),m(x(e),"goMenu",G,x(e)),y(x(e),"MAX_X",10),y(x(e),"MAX_Y",10),y(x(e),"MAX_TYPE",50),y(x(e),"types",[]),y(x(e),"btns",[]),y(x(e),"map",[]),y(x(e),"b1",null),y(x(e),"b2",null),y(x(e),"llk",void 0),y(x(e),"isShowLine",!1),y(x(e),"typeMap",[]),y(x(e),"canShowTips",!0),y(x(e),"nextCanLinePoint",[]),e}v(e,t);var i=e.prototype;return i.getRandom=function(t){return t[Math.floor(Math.random()*t.length)]},i.start=function(){var t=this;this.MAX_TYPE=K.MaxType,this.llk=new g(2+this.MAX_X,2+this.MAX_Y);for(var e=this.MAX_X*this.MAX_Y/this.MAX_TYPE,i=[].concat(Array(this.MAX_TYPE).keys()),o=0;o<e;o++){var a;(a=this.types).push.apply(a,i)}this.types.sort((function(){return.5-Math.random()})),this.typeMap=Array(this.MAX_TYPE).fill(null);for(var s=0;s<this.typeMap.length;s++)this.typeMap[s]=[];for(var p=new Array(2+this.MAX_Y).fill(null),u=0;u<p.length;u++){p[u]=new Array(2+this.MAX_X).fill(null);for(var f=0;f<p[u].length;f++){var y={node:null,x:0,y:0,type:X.EMPTY};p[u][f]=y}}this.map=p;for(var _=function(e){for(var i=function(i){var r=h(t.btnTmpl),o=(r.getComponent(n),r.getComponent(T));o.x=e,o.y=i,o.onClick=function(){if(!t.isShowLine)if(t.b1){t.b2=r,o.isSelect=!0,t.llk.setPoint({x:e,y:i},X.POINT);var n=t.b1.getComponent(T),a=t.b2.getComponent(T);if(n.type===a.type&&n.uuid!==a.uuid){var s=t.llk.check();if(s.isOK)return t.llk.setPoint({x:n.x,y:n.y},X.EMPTY),t.llk.setPoint({x:a.x,y:a.y},X.EMPTY),t.isShowLine=!0,t.showLine(s),void setTimeout((function(){t.b1.active=!1,t.b2.active=!1,t.b1=null,t.b2=null,t.line.clear(),t.isShowLine=!1,n.isSelect=!1,a.isSelect=!1,t.checkNextCanLine()}),250)}n.isSelect=!1,a.isSelect=!1,t.llk.setPoint({x:n.x,y:n.y},X.BLOCK),t.llk.setPoint({x:a.x,y:a.y},X.BLOCK),t.b1=null,t.b2=null}else t.b1=r,o.isSelect=!0,t.llk.setPoint({x:e,y:i},X.POINT)},r.setParent(t.node),r.setPosition(50*e,50*i,0);var a=t.types.pop();t.setBtnText(r,""+a),t.map[e][i].x=e,t.map[e][i].y=i,t.map[e][i].node=r,t.map[e][i].type=10*a,o.type=t.map[e][i].type,t.llk.setPoint({x:e,y:i},X.BLOCK),t.node.addChild(r),t.btns.push(r)},r=1;r<=t.MAX_Y;r++)i(r)},v=1;v<=this.MAX_X;v++)_(v);var b=h(this.linePre);this.line=b.getComponent(l),this.node.addChild(b),this.saveTypeMap(),this.checkNextCanLine(),this.btnTips.node.on(r.EventType.TOUCH_END,(function(){t.showTipsPoint()})),this.btnNewGame.node.on(r.EventType.TOUCH_END,(function(){t.newGame()})),this.goMenu.node.on(r.EventType.TOUCH_END,(function(){c.loadScene("welcome")}))},i.newGame=function(){this.b1=null,this.b2=null;for(var t=this.MAX_X*this.MAX_Y/this.MAX_TYPE,e=[].concat(Array(this.MAX_TYPE).keys()),n=[],i=0;i<t;i++)n.push.apply(n,e);n.sort((function(){return.5-Math.random()})),this.llk.resetMap();for(var r=1;r<=this.MAX_X;r++)for(var o=1;o<=this.MAX_Y;o++){var a=n.pop(),s=this.map[r][o].node;s.active=!0,this.setBtnText(s,""+a),this.map[r][o].type=10*a,s.getComponent(T).type=this.map[r][o].type,this.llk.setPoint({x:r,y:o},X.BLOCK)}this.saveTypeMap(),this.checkNextCanLine()},i.showLine=function(t){var e=this.line;e.clear(),e.lineWidth=10,e.fillColor.fromHEX("#ff0000"),t.turnPoints.forEach((function(t,n){0===n?e.moveTo(25+50*t.x,25+50*t.y):e.lineTo(25+50*t.x,25+50*t.y)})),e.stroke()},i.setBtnText=function(t,e){var n=t.getChildByName("Label").getComponent(p);return n.string=e,n},i.checkNextCanLine=function(){var t=this,e=this.getOneCanLinePoint();this.nextCanLinePoint=e,0===e.length&&(this.randomPointType(),setTimeout((function(){t.checkNextCanLine()}),500))},i.saveTypeMap=function(){this.typeMap.forEach((function(t,e,n){n[e]=[]}));for(var t=1;t<=this.MAX_X;t++)for(var e=1;e<=this.MAX_Y;e++){var n=this.map[t][e],i=n.node,r=n.type;i.active&&this.typeMap[r/10].push({x:t,y:e})}},i.getOneCanLinePoint=function(){for(var t=[],e=1;e<=this.MAX_X;e++)for(var n=1;n<=this.MAX_Y;n++){var i=this.map[e][n],r=i.node,o=(i.type,r.getComponent(T));if(r.active&&!(t.indexOf(o.type)>=0))for(var a=this.typeMap[o.type/10],s=0;s<a.length;s++){var h=a[s];if(h.x!==e||h.y!==n)if(this.map[h.x][h.y].node.active){this.llk.setPoint([{x:o.x,y:o.y},h],X.POINT);var l=this.llk.check();if(this.llk.setPoint([{x:o.x,y:o.y},h],X.BLOCK),l.isOK)return[{x:o.x,y:o.y},h]}}}return[]},i.randomPointType=function(){var t=this,e=[],n=this.llk.getPoints(X.BLOCK);n.forEach((function(n){e.push(t.map[n.x][n.y].type)})),e.sort((function(){return.5-Math.random()})),n.forEach((function(n){var i=e.pop(),r=t.map[n.x][n.y];r.type=i,t.setBtnText(r.node,""+i/10),r.node.getComponent(T).type=i})),this.saveTypeMap()},i.showTipsPoint=function(){var t=this;this.nextCanLinePoint.forEach((function(e){var n=e.x,i=e.y;t.map[n][i].node.getComponent(T).isTips=!0}))},e}(a)).prototype,"btnTmpl",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=k(L.prototype,"linePre",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=k(L.prototype,"btnTips",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=k(L.prototype,"btnNewGame",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=k(L.prototype,"goMenu",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=L));t._RF.pop(),t._RF.push({},"fd057VX6wREj51PEArwtkzz","welcome",void 0);var J=e.ccclass,Z=e.property;R=J("welcome"),j=Z(i),F=Z(i),H=Z(i),R((I=k((U=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return m(x(e=t.call.apply(t,[this].concat(i))||this),"btn1",I,x(e)),m(x(e),"btn2",W,x(e)),m(x(e),"btn3",V,x(e)),e}v(e,t);var n=e.prototype;return n.start=function(){var t=this;c.preloadScene("llkGame",(function(){console.log("llkGame scene preloaded")})),this.btn1.node.on(r.EventType.TOUCH_END,(function(){t.enterGame(10)})),this.btn2.node.on(r.EventType.TOUCH_END,(function(){t.enterGame(20)})),this.btn3.node.on(r.EventType.TOUCH_END,(function(){t.enterGame(50)}))},n.enterGame=function(t){K.setMaxType(t),c.loadScene("llkGame")},e}(a)).prototype,"btn1",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=k(U.prototype,"btn2",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=k(U.prototype,"btn3",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=U));t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});